---
inclusion: always
---

# 逃离鸭科夫联机模组项目概览

## 项目基本信息
- **项目名称**: Escape From Duckov Coop Mod Preview (逃离鸭科夫联机模组先遣版)
- **项目类型**: Unity游戏模组 (C# .NET Standard 2.1)
- **主要功能**: 为单人游戏《逃离鸭科夫》添加多人合作功能
- **开发框架**: HarmonyLib (运行时代码修改) + LiteNetLib (UDP网络通信)
- **许可证**: 基于AGPL-3.0的修改版本，禁止商业用途

## 核心技术架构

### 网络架构
- **网络库**: LiteNetLib (UDP协议)
- **架构模式**: 主机-客户端模式 (Host-Client)
- **同步频率**: 0.015秒 (约67Hz，高频同步)
- **支持功能**: 局域网发现、手动IP连接、自动重连

### 代码注入技术
- **框架**: HarmonyLib 2.x
- **注入方式**: 运行时方法补丁 (Runtime Patching)
- **目标**: 游戏核心逻辑的多人同步改造

### 同步系统
- **玩家同步**: 位置、动作、装备、血量
- **AI同步**: 敌人状态、行为、血量
- **物品同步**: 战利品箱、可拾取物品
- **环境同步**: 门、可破坏物体、投掷物
- **战斗同步**: 伤害计算、死亡状态

## 项目结构说明

### 主要目录
- `Main/`: 核心管理器和服务类
- `Net/`: 网络通信和数据处理
- `Patch/`: Harmony补丁类
- `SyncData/`: 同步数据管理
- `NetTag/`: 网络对象标记系统
- `Localization/`: 多语言支持文件

### 关键类说明
- `COOPManager`: 核心管理器，负责各子系统初始化
- `NetService`: 网络服务，处理连接和消息分发
- `PlayerStatus`: 玩家状态数据结构
- `Op`: 网络操作码定义

## 开发环境要求
- Visual Studio 2019+
- .NET Framework 4.8
- Unity游戏本体 (用于引用游戏DLL)
- 环境变量: `DUCKOV_GAME_DIRECTORY` (指向游戏根目录，系统会自动计算Managed路径)

## 多语言支持
- 中文 (zh-CN) - 主要语言
- 英文 (en-US)
- 日文 (ja-JP)
- 韩文 (ko-KR)

## 开发注意事项
- 所有网络相关代码需要考虑主机和客户端两种模式
- 使用异步编程模式 (UniTask)
- 注意内存管理，及时销毁网络对象
- 遵循游戏原有的代码风格和命名规范